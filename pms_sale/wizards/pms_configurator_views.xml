<odoo>

    <record id="pms_configurator_view_form" model="ir.ui.view">
        <field name="name">pms.configurator.view.form</field>
        <field name="model">pms.configurator</field>
        <field name="arch" type="xml">
            <form js_class="pms_configurator_form">
                <group>
                    <field
                        name="property_id"
                        domain="[('property_child_ids', '=', False)]"
                        required="1"
                        options="{'no_open': True, 'no_create': True}"
                    />
                    <field name="currency_id" invisible="1" />
                    <field
                        name="reservation_id"
                        attrs="{
                            'invisible': [('property_id', '=', False)],
                            'required': [('property_id', '!=', False)],
                        }"
                        domain="[('property_id', '=', property_id), ('currency_id', '=', currency_id)]"
                        options="{'no_open': True, 'no_create': True}"
                    />
                    <field name="product_id" invisible="1" />
                </group>
                <group col="4">
                    <field name="start" string="Check In" />
                    <field name="stop" string="Check Out" />
                    <field name="duration" invisible="1" />
                </group>
                <group>
                    <field name="timeline_html" nolabel="1" />
                </group>
                <notebook>
                    <page name="guest_ids" string="Guests">
                        <group>
                            <field name="no_of_guests" />
                        </group>
                        <field name="guest_ids" nolabel="1">
                            <tree string="Guests" editable="bottom">
                                <field
                                    name="partner_id"
                                    domain="[('is_property', '=', False)]"
                                />
                                <field name="name" />
                                <field name="phone" />
                                <field name="email" />
                            </tree>
                        </field>
                    </page>
                    <page string="Bookings">
                        <field name="reservation_ids" readonly="1">
                            <tree>
                                <field name="name" />
                                <field name="start" string="Check In" />
                                <field name="stop" string="Check Out" />
                                <field name="duration" />
                                <field name="stage_id" />
                            </tree>
                        </field>
                    </page>
                </notebook>
                <footer>
                    <button string="Ok" class="btn-primary" special="save" />
                    <button string="Cancel" class="btn-secondary" special="cancel" />
                </footer>
            </form>
        </field>
    </record>

    <record id="pms_configurator_action" model="ir.actions.act_window">
        <field name="name">Configure Reservation</field>
        <field name="res_model">pms.configurator</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="view_id" ref="pms_configurator_view_form" />
    </record>

</odoo>
