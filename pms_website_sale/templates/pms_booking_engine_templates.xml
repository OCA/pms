<?xml version="1.0" encoding="utf-8" ?>
<!-- todo rename page and file pms_review_booking_page -->
<odoo>
    <template id="pms_booking_engine_page" name="Booking">
        <t t-call="website.layout">
            <div name="booking_page" class="container">
                <div name="progress_bar" class="row">
                    <t t-call="pms_website_sale.progress_bar">
                        <t t-set="step" t-value="1" />
                    </t>
                </div>
                <div name="booking" class="row">
                    <div name="booking_table" class="col col-md-9">
                        <t t-call="pms_website_sale.pms_booking_engine_table">
                            <t
                                t-set="availability_results"
                                t-value="booking_engine.availability_results"
                            />
                        </t>
                    </div>
                    <div name="booking_summary" class="col col-md-3">
                        <t t-call="pms_website_sale.pms_booking_engine_summary">
                            <t t-set="booking_engine" t-value="booking_engine" />
                        </t>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <template id="pms_booking_engine_table">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th scope="col">Room</th>
                    <th scope="col">Checkin</th>
                    <th scope="col">Checkout</th>
                    <th scope="col">Number</th>
                    <th scope="col">Price</th>
                </tr>
            </thead>
            <tbody>
                <t t-foreach="availability_results" t-as="availability_result">
                    <t t-if="availability_result.value_num_rooms_selected > 0">
                        <tr>
                            <th
                                scope="row"
                                t-esc="availability_result.room_type_id.name"
                            />
                            <td
                                t-esc="availability_result.checkin"
                                t-options='{"widget":"date"}'
                            />
                            <td
                                t-esc="availability_result.checkout"
                                t-options='{"widget":"date"}'
                            />
                            <td t-esc="availability_result.value_num_rooms_selected" />
                            <td>
                                <span
                                    t-field="availability_result.price_total"
                                    t-options='{"widget": "monetary", "display_currency": website.currency_id}'
                                />
                            </td>
                            <td>
                                <form method="post">
                                    <input
                                        type="hidden"
                                        name="csrf_token"
                                        t-att-value="request.csrf_token()"
                                    />
                                    <input
                                        type="hidden"
                                        name="delete"
                                        t-att-value="availability_result.room_type_id.id"
                                    />
                                    <button type="submit" class="btn">
                                        <span class="fa fa-trash" />
                                    </button>
                                </form>
                            </td>
                        </tr>
                    </t>
                </t>
            </tbody>
        </table>
    </template>

</odoo>
